# 第一部分 操作元素

## JS的组成
ECMAScript：JavaScript语法，JavaScript基础。
DOM:页面文档对象模型（Web API）
BOM:浏览器对象模型（Web API）

## API 和 Web API
API(Application Programming Interface,应用程序编程接口)是一些预定义的函数，目的是提供应用程序与开发人员基于某软件或硬件得以访问一组例程的能力，而又无需访问源码，或理解内部工作机制的细节。

简单理解：API是给程序员提供的一种工具，以便能更轻松的实现想要完成的功能。

Web API是浏览器提供的一套操作浏览器功能和页面元素的API（BOM和DOM）


## 什么是DOM?
文档对象模型（Document Object Model，简称DOM）,
是W3C组织推荐的处理可扩展标记语言（HTML）的标准编程接口。
W3C已经定义了一系列的DOM接口，通过这些DOM接口可以改变网页的内容，结构和样式。

DOM树：
文档：一个页面就是一个文档，DOM中使用document表示；
元素：页面中的所有标签都是元素，DOM中使用element表示；
节点：网页中的所有内容都是节点（标签，属性，文本，注释等），DOM中使用node表示。

## 获取元素 getElementById
1. 因为我们的文档页面从上往下加载，所以先得有标签，所以我们的script写到标签下面
2. 参数 id是一个大小写敏感的字符串
```js
var timer=document.getElementById("time");
console.log(timer);
//可以通过console.dir打印我们返回的元素对象，更好的查看里面的元素和方法。
console.dir(timer);
//返回的是一个元素对象
console.log(typeof timer);
// console.log(timer.innerText);
```

## 获取元素 getElementsByTagName
1. 返回的是 获取过来的元素对象的集合，以伪数组的形式存储
```js
 var lis=document.getElementsByTagName("li");
//   var lis=document.getElementsByName("li");
    console.log(lis);
    console.log(lis[0]);
    for(i=0;i<lis.length;i++){
        console.log(lis[i]);
    }
    // 可以获取某个元素（父元素）内部所有指定标签名的子元素，父元素必须是指定的单个元素。
    var ol=document.getElementsByTagName("ol");
    console.log(ol[0].getElementsByTagName("li"));

```


## querySelector，HTML5新增的方法
- document.querySelector('选择器');
- 根据指定选择器返回第一个元素对象
```js
     var firstBox=document.querySelector(".box");
     console.log(firstBox);

     var nav=document.querySelector("#nav");
     console.log(nav);

     var li=document.querySelector('li');
     console.log(li);
     console.log(li.innerHTML);
```
- document.querySelectorAll('选择器');
根据指定选择器返回所有的元素
```js
     var allBox=document.querySelectorAll('.box');
     console.log(allBox);
     var lili=document.querySelectorAll('li');
     console.log(lili);
```


## 获取特殊元素body和html
- 获取body元素 document.body
    var bodyEle=document.body;
    console.log(bodyEle);

- 获取html元素 document.documentElement
    // 不是 var htmlEle=document.html;
    var htmlEle=document.documentElement;
    console.log(htmlEle);

## 事件基础
JavaScript使我们有能力创建动态页面，而事件是可以被JavaScript侦测到的行为。
    事件是由三个部分组成：事件源  事件类型  事件处理程序
(1)事件源 事件被触发的对象  谁  按钮
```js
var btn=document.getElementById('btn');
```     
(2）事件类型  如何触发  什么事件  比如鼠标点击（onclick） 还是鼠标经过 还是键盘按下

(3）事件处理程序  通过一个函数来完成
```js
        btn.onclick=function(){
            alert('点秋香');
        }
```

## 执行事件步骤
1. 获取事件源
2. 绑定事件  div01.onclick
3. 添加事件处理程序
```html
<div>123</div>
```
```js
//点击div 控制台输出  我被选中了
// 1.获取事件源
var div01=document.querySelector('div');
//2. 绑定事件  div01.onclick
// 3.添加事件处理程序
div01.onclick=function(){
    console.log("我被选中了");
}
```


## innerText和innerHTML的区别
### 写入时
- innerText 不识别html标签  非标准
```js
div01.innerText='<strong>今天</strong>是一个晴天。'
//直接输出标签<strong>今天</strong>
```
 
- innerHTML 识别html标签 W3C标准，用的更多
```js
div01.innerHTML='<strong>今天</strong>是一个晴天。'
可以识别标签<strong> </strong>，将“今天”加粗
```
### 读取时
innerText只会读取显示文字部分，去掉标签，空格和换行；
innerHTML会读取显示文字，标签，空格和换行
```html
    <p>
        我是文字
        <span>123</span>
    </p>
```

```js
       var p=document.querySelector('p');
        console.log(p.innerText);//会去掉标签，空格。只显示“我是文字 123”

        console.log(p.innerHTML);//保留空格，换行和标签，原样显示。
```


## 操作元素之修改元素属性
先获取元素，再可以直接修改元素的src,title,href等属性
```html
    <button id="ldh">刘德华</button>
    <button id="zxy">张学友</button>
    <img src="images/ldh.webp" alt="" title="刘德华">
```

```js
        // 修改元素属性 src
        // 1.获取元素
        var ldh=document.getElementById('ldh');
        var zxy=document.getElementById('zxy');
        var img=document.querySelector('img');

        //2. 注册事件，处理程序
        // 直接修改元素的src,title,href等属性
        zxy.onclick=function(){
            img.src='images/zxy.webp';
            img.title='张学友';
        }

        ldh.onclick=function(){
            img.src='images/ldh.webp';
            img.title='刘德华';
        }

```

## 表单元素的属性操作
利用DOM可以操作如下表单元素的属性:
type,value,checked,select,disabled
```html
    <button>按钮</button>
    <input type="text" value="请输入内容">
```

```js
    //1.获取元素
    var but=document.querySelector('button');
    var input=document.querySelector('input');
    //2.注册事件  处理程序
    but.onclick=function(){
        input.value='被点击了';

    //    but.disabled=true;

    //  this指向的是事件函数的调用者，就是but.onclick的but
    this.disabled=true;
    }
```

## 修改元素的样式
在js中，直接使用 元素名.style.样式属性名="样式值" 来修改样式属性，注意样式值需要加引号。
例如：
    box.style.display='none';
    this.style.backgroundColor='lightblue';
    this.style.width='250px';

```html
    <div></div>
    <script>
        // 1.获取元素
        var div=document.querySelector('div');
        //2.注册事件，处理程序
        div.onclick=function(){
            // div.style里面的属性 采用驼峰命名法，例如fontSize,backgroundColor
            // JS修改的style样式，产生的是行内样式，CSS权重比较高。
            this.style.backgroundColor='lightblue';
            this.style.width='250px';
    //this指向的是事件函数的调用者，就是div.onclick的div
        }
    </script>
```

```html
    <div class="box">
        淘宝二维码
        <img src="./images/二维码.png" alt="">
        <i class="close-btn">x</i>
    </div>
    <script>
        //1.获取元素
        var btn=document.querySelector('.close-btn');
        var box=document.querySelector('.box');

        //注册事件，处理程序     
        btn.onclick =function(){
            box.style.display='none';
        }
    </script>
```

## 精灵图的使用
先在css中设置背景图的地址background-image: url("./images/前端精灵图.jpg");
设置是否重复background-repeat: no-repeat;

然后再在js中引用目标对象lis[i].style.backgroundPosition='0 -'+index+"px";
js可以对精灵图进行循环控制输出。
backgroundPosition="x y";x的正值表示背景图相对于对象向右移动，负值向左；y的正值表示精灵图相对于对象的向下移动，负值向上。
注意精灵图需要相对于对象向上移动，要是负的。
```css
div{
    width: 500px;
    margin-left: 600px;
   }
li{
    width: 52px;
    height: 52px;
    border: 1px solid;
    list-style: none;
    margin: 10px ;
    float: left;
    background-image: url("./images/前端精灵图.jpg");
    /* background-position: 0px 0px; */
    background-repeat: no-repeat;
}
```
```html
    <div>
        <ul>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>

```

```js
    //1.获取元素，所有的小li
    var lis=document.querySelectorAll('li');
    for(var i=0;i<lis.length;i++){
        var index=i*63;
        lis[i].style.backgroundPosition='0 -'+index+"px";
       
// x y:表示使用长度值定位,是将背景图像的左上角,放置在对象的背景区域中（x, y）所指定的位置，
// 即 x, y 定义的是背景图像的左上角，相对于背景区域左上角的偏移量。
//偏移量长度可以是正值，也可以是负值。
//x 为正值表示向右偏移，负值表示向左偏移；y 为正值表示向下偏移，负值表示向上偏移。
        }
```

## 获得焦点和失去焦点
获得焦点input.onfocus=function(){} ， 失去焦点input.onblur=function(){}
```js
        // 获取对象元素
        input=document.querySelector('input');
        //注册事件  获得焦点onfocus
        input.onfocus=function(){
         //   console.log("input获得了焦点");
         if(this.value=='手机'){
            this.value='';
         }
         this.style.color='#000';
        }

        //注册事件  失去焦点onblur
        input.onblur=function(){
        //    console.log("input失去了了焦点");
        if (this.value==''){
            this.value='手机';
            this.style.color='#999';
         }else{
            this.style.color='#000';
         }
         
        }

```






## 用className修改样式属性
如果样式修改的比较多，可以采用操作类名className的方式更改元素的样式
className会直接更改元素的类名，会覆盖原先的类名
先在css文件中写好需要更改的样式类，然后用js直接更改元素的className属性
<style> .change{width: 150px;} </style>
this.className='change';
```css
    <style>
        .change{
            width: 150px;
            background-color: blue;
            font-size: 30px;
        }
    </style>
```
```html js
    <div>
        abc
    </div>

    <script>
        // 1.获取元素
        var div=document.querySelector('div');
        // 2.注册事件
        div.onclick=function(){
            this.className='change';
        }
    </script>

```

